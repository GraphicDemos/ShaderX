<HTML>
<HEAD>
<TITLE>HLSL Deform Direct3D Sample</TITLE>
<STYLE TYPE="text/css">
.h1 { font-family: tahoma; font-size: 18px; font-weight: bold }
.h2 { font-family: arial; font-size: 14px; font-weight: bold; vertical-align: super; line-height: 20px }
.h3 { font-family: arial; font-size: 12px; font-weight: bold; vertical-align: super; line-height: 20px }
.p  { font-family: arial; font-size: 12px; line-height: 16px }
.header { padding: 3px; font-family: tahoma; font-size: 10px; font-weight: bold; color: white } 
.chart { font-family: monospace; font-size: 12px }
</STYLE>
</HEAD>

<BODY bgColor=#ffffff MARGINHEIGHT="2" TOPMARGIN=2 LEFTMARGIN=2 RIGHTMARGIN=2>

<!-- HEADER - DO NOT MODIFY -->
<TABLE BACKGROUND="doc/header_background.gif" WIDTH="100%" BORDER=0 CELLPADDING=0 CELLSPACING=0>
<TR>
<TD ALIGN="left"><IMG SRC="doc/header_left.gif" BORDER=0></TD>
<TD ALIGN="right"><IMG SRC="doc/header_right.gif" BORDER=0></TD>
</TR>
</TABLE>
<!-- END HEADER -->

<!-- MASTER TABLE - DO NOT MODIFY -->
<TABLE WIDTH="100%" BORDER=0 CELLPADDING=20>
<TR>
<TD CLASS="p">
<!-- END MASTER TABLE -->

<FONT CLASS="h1">
<!-- INSERT SAMPLE NAME -->
HLSL Deform Sample
<!-- END SAMPLE NAME -->
</FONT>
<HR>

<TABLE WIDTH="100%" BGCOLOR="#FFFFFF" BORDER=0 CELLPADDING=10 CELLSPACING=0>
<TR>
<TD CLASS="p">
<BR CLEAR="left">
<IMG style="MARGIN-TOP: -7px; MARGIN-LEFT: -20px" hspace=20 src="HLSL_Deform.jpg" align=left vspace=10 >
<FONT CLASS="h2">Description</FONT><BR>
<!-- INSERT SAMPLE DESCRIPTION -->
This sample shows how to apply deformations Tape/Twist/Spherify to a mesh object
<!-- END SAMPLE DESCRIPTION -->
<BR CLEAR="left">
<BR CLEAR="left">
</TD>
</TR>
</TABLE>

<HR>
<BR CLEAR="left">
<FONT CLASS="h2">Path</FONT>
<TABLE STYLE="margin-left: -4px" CELLSPACING=4 CELLPADDING=4 BORDER=0>
<TR>
<!-- PATH INFORMATION -->
<TD CLASS="chart" BGCOLOR=#DDDDDD ALIGN="right"><B>Source:</B></TD>
<TD CLASS="chart" BGCOLOR=#EEEEEE>HLSL_Deform</TD>
<!-- END PATH INFORMATION -->
</TR>
<TR>
<!-- PATH INFORMATION -->
<TD CLASS="chart" BGCOLOR=#DDDDDD ALIGN="right"><B>Executable:</B></TD>
<TD CLASS="chart" BGCOLOR=#EEEEEE>HLSL_Deform\Debug</TD>
<!-- END PATH INFORMATION -->
</TR>
</TABLE>
<P>
<FONT CLASS="h2">Sample Overview</FONT><BR>
This sample creates some mesh data, loads a mesh, creates an effect from a file, and then uses the effect to render the mesh.  The effect that is used is a vertex shader which transforms the vertex data and a pixel shader for the light.
<P>
<FONT CLASS="h2">How does the sample work?</FONT><BR>
First the sample creates/loads the geometry with D3DXLoadMeshFromX() or creates the geometry on the fly with LockVertexBuffer() and calls D3DXComputeNormals() to create mesh normals if there aren't any. It then calls D3DXCreateEffectFromFile() to compile the effect text file to a ID3DXEffect* interface called m_pEffect. 
<P>
In CMyD3DApplication::Render() it sets the technique to use with a call to m_pEffect->SetTechnique(). It passes a D3DXHANDLE to the technique that was obtained upon init with a call to m_pEffect->GetTechniqueByName(). It is possible to pass a string name instead of a handle, but using a handle improves performance since this high frequency call does not have to spend time on a string compare. 
<P>It then sets variables used by the technique such as the World*View*Projection matrix, the values for the different functions tape/twist/spherify and the time variable with various ID3DXEffect::Set*() calls. 
To render it calls m_pEffect->Begin() which returns the number of passes required by the technique, then it loops through each pass calling m_pEffect->Pass(iPass) and rendering the mesh with m_pMesh->DrawSubset(). When all the passes are done, it calls m_pEffect->End(). 
<P>
<!-- FOOTER - DO NOT MODIFY -->
<BR clear="left">
<BR clear="left">
<BR clear="left">
<HR>
<CENTER>
</CENTER>
<!-- END FOOTER -->

<!-- MASTER TABLE - DO NOT MODIFY -->
</TD>
</TR>
</TABLE>
<!-- END MASTER TABLE -->

</BODY>
</HTML>